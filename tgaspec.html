<!DOCTYPE html>
<html>
    <head>
        <title>Aki Gonzalez - Color Customization Tool</title>
        <link rel="stylesheet" type="text/css" href="stylesheets/style_overview.css"/>
    </head>
    <script src="js/Images.js"></script>
    
    <body>
        <div class="CHeader">
            <h1>Aki Gonzalez - Portfolio</h1>
            <h3>
                Game programmer - Gameplay | Tools<br>
            </h3>
            <br>
            <a href="index.html">Projects</a>
            <!-- <a href="projects.html">Projects</a> -->
            <!-- <a href="archive.html">Archive</a> -->
            <a href="about.html">About</a>
        </div>

        <div class="CPageContent"><!-- Page content -->
            <div class="CCenteredLargeText">
                <h2>Color Customization Tool</h2>
            </div>

            <div class="CShown">
                <img src="source/images/spec/rgbw_to_albedo.gif" alt="Editor" id="Editor" onClick="SwapSource('Editor', 'EditorCode')">
                <div class="CHidden">
                    <img src="source/images/spec/code/editor.png" alt="Color editor code" id="EditorCode" onClick="SwapSource('Editor', 'EditorCode')">
                </div>   
                <p>click image to view code for the editor window</p>
            </div>

            <div class="CCenteredSingleDiv">
                <ul>
                    Specifications:
                    <li>Engine:   IronWrought [C++][DirectX11] (Engine developed by <a href="softblob.html">SoftBlob Studios</a>)</li>
                    <li>Duration: 5 weeks half-time (4h/day)</li>
                </ul>
                <br>
                <h3>Introduction: Goals</h3>
                <p> 
                    As part of the curriculum for game programmers at The Game Assembly the specialization course gave the opportunity to work on anything that interests us. 
                    I was curious about in-game customization. I figured the in-game part might be out of scope for the time I had so I reworked my idea to an engine intergrated tool.                         
                </p>
                <ul>
                    Main Goals:
                    <li>Tint a models underlying albedo map with a couple of colors that cover different areas</li>
                    <li>Control of emissive</li>
                    <li>Editor using ImGui with camera controls similar to Autodesk Maya</li>
                </ul>
                <br>
                <ul>
                    Secondary Goals:
                    <li>Support for textures</li>
                </ul>
                <!-- <br>
                <ul>
                    I planned 3 weeks with goals for each day that I later estimated time for and used as tasks:
                    <li>1st week: create a model, store colors in IronWrought's model component-class, save & load using RapidJSON</li>
                    <li>2nd week: editor with interface using Dear ImGui, orbit camera</li>
                    <li>3rd week: refactoring and improvements</li>
                    <li>4th & 5th weeks: textures and portfolio webpage work</li>
                </ul> -->
                <p>
                </p>
            </div>
           
            <div class="CShown">
                <img src="source/images/spec/tintmap.jpg" alt="Tint map - shader code" id="TintMap" onClick="SwapSource('TintMap', 'TintMapShaderCode')">
                <div class="CHidden">
                    <img src="source/images/spec/code/code_tintshader.png"  alt="Tint map" id="TintMapShaderCode" onClick="SwapSource('TintMap', 'EditoTintMapShaderCoderCode')">
                </div>   
                <p>Click image to view the shader code.</p>
            </div>
            <div class="CCenteredSingleDiv">
                <h3>How to Control Which Areas are to be Tinted</h3>
                <p> 
                    I wasnâ€™t sure where or how I would start so I decided that I would look for a reference game.
                    I picked Warframe which uses <i>tint maps</i> to control the affected areas of a texture. 
                    Which is explained in their <a href="https://www.warframe.com/steamworkshop/help/index.php?page=texturing-guide">Tennogen</a> program (community created cosmetics).
                </p>
            </div>

            <div class="CShown">
                <img src="source/images/spec/albedo_to_texture.gif" alt="Textures">
            </div>
            <div class="CShown">
                <img src="source/images/spec/texture_to_rgbw.gif" alt="Textures To Color">
            </div>
            <div class="CCenteredSingleDiv">
                <h3>Tinting of the Model</h3>
                <p>
                    For each pixel the RGBA values of the tint map are saved in 4 separate floats. These are then used to scale a blend factor which is used to lerp<a href="#Improvements"></a> between the
                    RGB value sampled from the albedo map.
                    If there are both a color and a texture on the same lsot the last one becomes the most prominent. 
                    <br><br>
                    Emissive is taken from a material map and is handled separately.
                </p>
            </div>

            <div class="CShown">
                <img src="source/images/spec/load.gif" alt="Load" id="Load" onClick="SwapSource('Load', 'Save')">
                <div class="CHidden">
                    <img src="source/images/spec/save.gif" alt="Save" id="Save" onClick="SwapSource('Load', 'Save')">
                </div>   
                <p>Click image to swap between save and load.</p>
            </div>
            <div class="CCenteredSingleDiv">
                <h3>Saving and Loading</h3>
                <p> 
                    RapidJSON works great for this tool, there isn't a lot of data to be saved or loaded so it is not too slow and the convenience of the files being readable outside of the editor is a plus. 
                    The serialization and deserialization are handled inside the class; <i>CModelComponent</i>, that holds the data to keep. This is to keep it consistent with how other parts of IronWrought work.
                </p>
            </div>

            <div class="CShown">
                <img src="source/images/spec/camera.gif" alt="Camera" id="Camera" onClick="SwapSource('Camera', 'CameraCode')">
                <div class="CHidden">
                    <img src="source/images/spec/code/camera.png" alt="Camera Code" id="CameraCode" onClick="SwapSource('Camera', 'CameraCode')">
                </div>   
                <p>Click image to view code.</p>
            </div>
            <div class="CCenteredSingleDiv">
                <h3>Orbit Camera</h3>
                <!-- <p>
                    The camera was tricky to get to work the way I wanted it to. I underestimated the time it would take to get the camera to an acceptable working state.
                </p> -->
            </div>


            <div class="CCenteredSingleDiv">
                <h3>Conclusion</h3>
                <p>
                    I managed to complete all my goals and now I have something I can improve upon. Hopefully it will come to use in our final project.<br>
                    Using Warframe as a reference was a great starting point, and I find the coloring results to be good.
                    <a href="https://github.com/ocornut/imgui">Dear ImGui</a> is a great tool for creating interfaces for editors like this one. 
                    I think the editor part would have been difficult to create without it, especially creating a color picker.
                    <br>
                </p>
                <h3 id="Improvements">Improvements I Wish to Make</h3>
                <p>
                    There's room for some optimizations when handling and storing data and sending it to the graphics card that can be made.
                    <br><br>
                    I think the lack of a proper folder browser might make the editor frustrating to use so the next step would be to implement a proper one.
                    <br><br>
                    The data for the tinted model could be encapsulated into its own class.
                    <br><br>
                    I got a tip about using HSV for blending colors instead of RGB since there is a chance of discoloration when using lerp to blend RGB values.
                    <br><br>
                    Separating the tint map from the FBX so that one asset can have several tint maps to choose from.
                    <br><br>
                    I would like to create an in-game editor.
                </p>
            </div>

            <div class="CShown">
                <img src="source/images/spec/final.gif" alt="Everything" id="Final" onClick="SwapSource('Final', 'Smiley')">
                <div class="CHidden">
                    <img src="source/images/gcSmiley.png" alt="Smiley" id="Smiley" onClick="SwapSource('Final', 'Smiley')">
                </div>  
            </div>

            <div class="CCenteredSingleDivNoBorder">
                <p></p>
            </div>

            <div class="CCenteredSingleDivNoBorder">
                <p><br></p>
            </div>

        </div><!-- ! Page content -->

        <div class="CFooter">
            <a href="https://www.linkedin.com/in/aki-gonzalez-389425207"><img src="source/images/linkedin_icon.png" alt="LinkedIn Profile"></a>
            <a href="https://github.com/Aki-Gonzalez"><img src="source/images/git_icon.png" alt="GitHub Profile"></a>
        </div>

    </body>
</html>